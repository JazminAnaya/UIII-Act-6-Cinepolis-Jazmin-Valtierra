<!-- app_Cinepolis/templates/funcion/agregar_funcion.html -->
{% extends 'base.html' %}

{% block title %}Agregar Función{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">Programar Nueva Función</h3>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="pelicula" class="form-label">Película</label>
                            <select class="form-select" id="pelicula" name="pelicula" required>
                                <option value="">Seleccione una película</option>
                                {% for pelicula in peliculas %}
                                    <option value="{{ pelicula.pk }}">{{ pelicula.titulo }}</option>
                                {% empty %}
                                    <option value="" disabled>No hay películas disponibles.</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="sucursal" class="form-label">Sucursal</label>
                            <select class="form-select" id="sucursal" name="sucursal" required>
                                <option value="">Seleccione una sucursal</option>
                                {% for sucursal in sucursales %}
                                    <option value="{{ sucursal.pk }}">{{ sucursal.nombre_cine }} - {{ sucursal.ciudad }}</option>
                                {% empty %}
                                    <option value="" disabled>No hay sucursales disponibles.</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="sala" class="form-label">Sala</label>
                            <select class="form-select" id="sala" name="sala" required>
                                <option value="">Seleccione una sala</option>
                                {% for sala in salas %}
                                    <option value="{{ sala.pk }}">{{ sala.sucursal.nombre_cine }} - Sala {{ sala.numero_sala }} ({{ sala.get_tipo_sala_display }})</option>
                                {% empty %}
                                    <option value="" disabled>No hay salas disponibles.</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="fecha_hora" class="form-label">Fecha y Hora</label>
                            <input type="datetime-local" class="form-control" id="fecha_hora" name="fecha_hora" required>
                        </div>
                        <div class="mb-3">
                            <label for="precio_boleto" class="form-label">Precio del Boleto</label>
                            <input type="number" step="0.01" class="form-control" id="precio_boleto" name="precio_boleto" required>
                        </div>
                        <div class="mb-3">
                            <label for="idioma" class="form-label">Idioma</label>
                            <select class="form-select" id="idioma" name="idioma" required>
                                <option value="">Seleccione un idioma</option>
                                {% for choice_value, choice_label in idiomas_opciones %}
                                    <option value="{{ choice_value }}">{{ choice_label }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="estatus" class="form-label">Estatus</label>
                            <select class="form-select" id="estatus" name="estatus" required>
                                <option value="">Seleccione un estatus</option>
                                {% for choice_value, choice_label in estatus_opciones %}
                                    <option value="{{ choice_value }}">{{ choice_label }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-plus-circle me-2"></i>Crear Función</button>
                        <a href="{% url 'ver_funciones' %}" class="btn btn-secondary ms-2"><i class="fas fa-arrow-left me-2"></i>Volver a Funciones</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}